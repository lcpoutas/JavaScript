<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      function contador(frase) {
        let texto = frase.toLowerCase().replace(/[^\w]/gi, " ").split(" ");

        //filtramos aquellos caracteres que no forman palabras como (,.!¡')

        let palabras = {};

        let maximo = 0;

        let repetida = "";

        // Recorremos el array con las palabras y las contamos

        for (elemento of texto) {
          if (!palabras[elemento]) {
            // Si no existe esa letra en el objeto la creamos y le asignamos el contador uno
            palabras[elemento] = 1;
          } else {
            // Si esa letra ya existe simplemente sumamos uno al contador
            palabras[elemento]++;
          }
        }

        for (letra in palabras) {
          if (palabras[letra] > maximo) {
            maximo = palabras[letra];
            repetida = letra;
          }
        }

        console.log(
          `la palabra más repetida es ${repetida} con ${maximo} repeticiones`
        );
      }

      var texto = prompt("introduce un texto");

      contador(texto);
    </script>
  </body>
</html>
